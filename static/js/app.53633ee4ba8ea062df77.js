webpackJsonp([1],{"0RK1":function(t,e){},"1fpj":function(t,e){},"79FW":function(t,e){},JKkS:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("xd7I"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=o("C7Lr")({name:"App"},a,!1,function(t){o("79FW")},null,null).exports,i=o("3XdE"),r=o("ZLEe"),l=o.n(r),c={name:"voterDialog",props:{candidateList:{required:!0,type:Array,default:function(){return[]}}},data:function(){return{radio:"",dialogVisible:!1,colors:["primary","success","info","warning","danger"]}},methods:{handleSure:function(){this.dialogVisible=!1,this.$emit("vote",this.radio)},getColor:function(){var t=Math.floor(5*Math.random());return this.colors[t]}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"候选人名单","show-close":!1,visible:t.dialogVisible,"max-width":"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("div",{staticClass:"candidate-panel"},t._l(t.candidateList,function(e,s){return o("div",{key:s,staticClass:"radio-block",class:[t.getColor()]},[o("el-radio",{attrs:{label:e},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(e))])],1)}),0),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.handleSure}},[t._v("确 定")])],1)])},staticRenderFns:[]};var h={name:"vote",components:{voterDialog:o("C7Lr")(c,u,!1,function(t){o("b1VV")},null,null).exports},data:function(){return{fans:"",result:{},score:{},voteHistory:{},memberList:["刘志斌","刘钦铸","马文涛","柯艳琴","张贵","戴敏","熊龙辉","叶国良","许璠","王晓芳","艾小姚","姜明哲","王生资","孟腾飞","徐海","刘雅琴"],banList:[],colors:["primary","success","info","warning","danger"],banOrVote:""}},computed:{candidateList:function(){var t=this,e=[];return this.memberList.forEach(function(o){t.banList.includes(o)||e.push(o)}),e}},created:function(){},watch:{},methods:{handleDelBanItem:function(t){this.banList.splice(t,1)},isWinner:function(t){if(this.result.hasOwnProperty(t))return!0},getPercentage:function(t){return 100*(t/this.memberList.length).toFixed(2)},getFans:function(t){var e=this,o=[];return l()(this.voteHistory).forEach(function(s){e.voteHistory[s]===t&&o.push(s)}),"我的粉丝:"+o.join(",")},setResult:function(){var t=this;this.result={};var e=[],o=[],s=[];l()(this.score).forEach(function(e){o.push(t.score[e]),s.push(e)});var a=0;o.forEach(function(t,o){t>a?(a=t,(e=[]).push(o)):t===a&&(a=t,e.push(o))}),e.forEach(function(e){t.$set(t.result,s[e],a)});for(var n=0;n<o.length-1;n++)for(var i=n+1;i<o.length;i++)if(o[i]>o[n]){var r=o[n];o[n]=o[i],o[i]=r,r=s[n],s[n]=s[i],s[i]=r}this.score={},s.forEach(function(e,s){t.$set(t.score,e,o[s])})},setScore:function(t){this.score.hasOwnProperty(t)?this.score[t]+=1:this.$set(this.score,t,1)},setVoteHistory:function(t){this.voteHistory[this.fans]=t},voteCheck:function(t){if(this.voteHistory.hasOwnProperty(this.fans)){this.$message({message:"亲，重复投票，之前的票数将作废哦!",type:"warning"});var e=this.voteHistory[this.fans];1===this.score[e]?this.$delete(this.score,e):this.score[e]=this.score[e]-1,this.$delete(this.voteHistory,this.fans)}this.fans===t&&this.$message({message:"迷之自信，看好你哦!",type:"warning"})},vote:function(t){console.log("vote:",t),this.voteCheck(t),this.setVoteHistory(t),this.setScore(t),this.setResult()},handleMember:function(t){"vote"===this.banOrVote?(this.fans=t,this.$refs.voterDialog.dialogVisible=!0):"ban"===this.banOrVote&&(this.banList.includes(t)||this.banList.push(t))},getColor:function(){var t=Math.floor(5*Math.random());return this.colors[t]},handleBan:function(){this.banOrVote="ban"},handleVote:function(){this.banOrVote="vote"}}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vote-wrap"},[o("div",{staticClass:"member-panel"},t._l(t.memberList,function(e,s){return o("el-col",{key:s,attrs:{xs:12,sm:8,md:6,lg:4,xl:4}},[o("div",{staticClass:"member-name-block"},[o("el-button",{attrs:{type:t.getColor(),plain:"",size:"medium",disabled:""===t.banOrVote},on:{click:function(o){return t.handleMember(e)}}},[t._v(t._s(e))])],1)])}),1),t._v(" "),o("div",{staticClass:"ban-vote-panel"},[o("el-button",{staticClass:"btn-ban",attrs:{type:"danger"},on:{click:t.handleBan}},[t._v("BAN")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.handleVote}},[t._v("VOTE")])],1),t._v(" "),o("div",{staticClass:"list"},[o("el-row",[o("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[o("div",{staticClass:"ban-list"},[o("p",{staticClass:"title"},[t._v("曾经的周最佳")]),t._v(" "),o("div",{staticClass:"ban-panel"},t._l(t.banList,function(e,s){return o("el-tag",{key:s,attrs:{closable:"",type:t.getColor()},on:{close:function(e){return t.handleDelBanItem(s)}}},[t._v(t._s(e))])}),1)])]),t._v(" "),o("el-col",{attrs:{xs:24,sm:24,md:16,lg:16,xl:16}},[o("div",{staticClass:"vote-list"},t._l(t.score,function(e,s){return o("div",{key:s,staticClass:"vote-block"},[o("div",{staticClass:"progress-line"},[o("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.getPercentage(e)}})],1),t._v(" "),o("div",{staticClass:"vote-ticket"},[o("el-popover",{attrs:{placement:"right",title:"",width:"200",trigger:"hover",content:t.getFans(s)}},[o("el-button",{class:{winner:t.isWinner(s)},attrs:{slot:"reference",plain:"",size:"mini",type:t.getColor()},slot:"reference"},[t._v("\n                  "+t._s(s)),o("span",{staticClass:"ticket-num"},[t._v(t._s(e))]),t._v("票\n                ")])],1)],1)])}),0)])],1)],1),t._v(" "),o("voterDialog",{ref:"voterDialog",attrs:{candidateList:t.candidateList},on:{vote:t.vote}})],1)},staticRenderFns:[]};var f=o("C7Lr")(h,d,!1,function(t){o("0RK1")},null,null).exports,v=o("IHPB"),m=o.n(v),b={name:"vote",data:function(){return{memberList:["刘志斌","刘钦铸","马文涛","柯艳琴","张贵","戴敏","熊龙辉","叶国良","许璠","王晓芳","艾小姚","姜明哲","王生资","孟腾飞","徐海","刘雅琴"],noVoteList:["刘志斌","刘钦铸","马文涛"],form:{oldGoodMember:"",allMember:"",voteA:"",voteB:""},tableData:{header:["","A","B","C","票数"],body:{A:{auth:{name:"A",noVote:!1},A:0,B:0,C:0,total:""},B:{auth:{name:"B",noVote:!0},A:0,B:0,C:0,total:""},C:{auth:{name:"C",noVote:!1},A:0,B:0,C:0,total:""}}}}},computed:{oldGoodMemList:function(){return""!==this.form.oldGoodMember?this.form.oldGoodMember.split(","):[]},allMemList:function(){return""!==this.form.allMember?this.form.allMember.split(","):[]},beVoteOpt:function(){var t=this,e=[];return this.memberList.forEach(function(o){if(!t.noVoteList.includes(o)){var s={};s.label=o,s.value=o,e.push(s)}}),e},memberOpt:function(){var t=[];return this.memberList.forEach(function(e){var o={};o.label=e,o.value=e,t.push(o)}),t}},watch:{allMemList:function(){this.memberList=this.allMemList,this.transTableData(this.allMemList)},oldGoodMemList:function(){this.noVoteList=this.oldGoodMemList,this.transNoVote(this.noVoteList)}},methods:{transTableData:function(t){var e=["","票数"];e.splice.apply(e,[1,0].concat(m()(t))),this.tableData.header=e;var o={};t.forEach(function(e){o[e]={};var s={},a={name:e,noVote:!1};s.auth=a,t.forEach(function(t){s[t]=0}),s.total="",o[e]=s}),this.tableData.body=o},transNoVote:function(t){var e=this.tableData.body;this.noVoteList.forEach(function(t){e[t].auth.noVote=!0})},handleVote:function(){var t=this.form,e=t.voteA,o=t.voteB;this.tableData.body[o][e]=1,this.calcVoteNumber()},calcVoteNumber:function(){var t=this.tableData.body;l()(t).forEach(function(e){var o=0;l()(t[e]).forEach(function(s){"auth"!==s&&"total"!==s&&(o+=+t[e][s])}),t[e].total=o})},isNoVote:function(t){return!0===t.noVote},showCol:function(t){return t.name?t.name:t},isColTitle:function(t){return!!t.noVote},isColHasVolter:function(t,e){return"total"===e&&t>0}},created:function(){this.transTableData(this.memberList),this.transNoVote(this.noVoteList)}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vote-wrap"},[o("div",{staticClass:"show-wrap"},[o("div",{staticClass:"tb-head"},t._l(t.tableData.header,function(e,s){return o("div",{key:s,staticClass:"tb-head-col"},[t._v("\n        "+t._s(e)+"\n      ")])}),0),t._v(" "),o("div",{staticClass:"tb-body"},t._l(t.tableData.body,function(e,s){return o("div",{key:s,staticClass:"tb-row"},t._l(e,function(e,s){return o("div",{key:s,staticClass:"tb-col",class:{noVote:t.isNoVote(e),"col-title":t.isColTitle(e),"col-hasVoter":t.isColHasVolter(e,s)}},[t._v("\n          "+t._s(t.showCol(e))+"\n        ")])}),0)}),0)]),t._v(" "),o("div",{staticClass:"set-wrap"},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"所有小伙伴"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.allMember,callback:function(e){t.$set(t.form,"allMember",e)},expression:"form.allMember"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"曾经周最佳"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.oldGoodMember,callback:function(e){t.$set(t.form,"oldGoodMember",e)},expression:"form.oldGoodMember"}})],1),t._v(" "),o("div",{staticClass:"vote"},[o("el-select",{attrs:{placeholder:"投票人"},model:{value:t.form.voteA,callback:function(e){t.$set(t.form,"voteA",e)},expression:"form.voteA"}},t._l(t.memberOpt,function(t,e){return o("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),o("span",[t._v("选")]),t._v(" "),o("el-select",{attrs:{placeholder:"得票人"},model:{value:t.form.voteB,callback:function(e){t.$set(t.form,"voteB",e)},expression:"form.voteB"}},t._l(t.beVoteOpt,function(t,e){return o("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.handleVote}},[t._v("确定")])],1)],1)],1)])},staticRenderFns:[]};var _=o("C7Lr")(b,p,!1,function(t){o("1fpj")},null,null).exports;s.default.use(i.a);var g=new i.a({routes:[{path:"/",name:"vote",component:f},{path:"/voteOld",name:"voteOld",component:_}]}),C=o("4gzT"),y=o.n(C);o("JKkS");s.default.use(y.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:g,components:{App:n},template:"<App/>"})},b1VV:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.53633ee4ba8ea062df77.js.map